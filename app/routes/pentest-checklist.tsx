import { useLoaderData } from "@remix-run/react";
import Header from "~/components/Header";
import { getClient, pentestChecklistQuery } from "~/lib/sanity";

export const loader = async () => {
  const sites = await getClient().fetch(pentestChecklistQuery);
  return { site: sites[0] };
};

export default function Index() {
  const { site } = useLoaderData();
  return (
    <div className="p-8 md:p-32">
      {site.blocks.map((block: any) => (
        <div key={block._key}>
          {block._type == "header" && <Header>{block.value}</Header>}
          {block._type == "plainText" && (
            <p className="mt-8 mb-4">
              <b>{block.value}</b>
            </p>
          )}
          {block._type == "checkbox" && (
            <div className="flex items-center">
              <input type="checkbox" className="w-4 h-4 mr-2" />
              <p className="text-gray-900 text-sm font-medium">{block.value}</p>
            </div>
          )}
        </div>
      ))}
    </div>
  );
}
